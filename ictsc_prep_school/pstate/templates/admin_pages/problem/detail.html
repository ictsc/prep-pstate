{% extends 'adminlte/base.html' %}

{% block title %}My App{% endblock %}
{% block content %}
<h1>{{ problem.display_name }}</h1>
<div align="right">
    <button class="btn btn-info" onClick="location.href=''">Preview</button>
    <button class="btn btn-info" onClick="location.href='{% url 'problems-problemenvironment-create' pk=problem.id %}'">Test run</button>
    <button class="btn btn-info" onClick="location.href=''">Create problem environment</button>
</div>
<div align="right">
    <button class="btn btn-danger" onClick="location.href='{% url 'problem-delete' pk=problem.id %}'">Delete</button>
</div>
<div class="problem-body">
    <div class="nav-tabs-custom">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#tab_1" data-toggle="tab">Problem sentence</a></li>
            <li><a href="#tab_2" data-toggle="tab">Problem attachments</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="tab_1">
                <div align="right">
                    <button class="btn btn-info" onClick="location.href='{% url 'problem-edit' pk=problem.id %}'">Edit</button>
                </div>
                {{ problem.description|linebreaks }}
            </div>
            <div class="tab-pane" id="tab_2">
                <div align="right">
                    <button class="btn btn-info" onClick="location.href='{% url 'problem-edit' pk=problem.id %}'">Edit</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div>
    <h2>Terraform</h2>
    {% if problem.terraform_file_id == None %}
    <div align="right">
        <button class="btn btn-primary" onClick="location.href='{% url 'terraformfile-create' pk=problem.id %}'" >Add</button>
    </div>
    {% else %}
    <div class="nav-tabs-custom">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#tab_1t" data-toggle="tab">Terraform - TerraformFile</a></li>
            <li><a href="#tab_2t" data-toggle="tab">Terraform - Provider</a></li>
            <li><a href="#tab_3t" data-toggle="tab">Terraform - ShellScript</a></li>
            <li><a href="#tab_4t" data-toggle="tab">Terraform - Variables</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="tab_1t">
                <div align="right">
                    <button class="btn btn-info" onClick="location.href='{% url 'problem-edit' pk=problem.id %}'">Edit</button>
                </div>
                {{ problem.terraform_file_id.body|linebreaks }}
            </div>
            <div class="tab-pane" id="tab_2t">
                <div align="right">
                    <button class="btn btn-info" onClick="location.href='{% url 'problem-edit' pk=problem.id %}'">Edit</button>
                </div>
                <h3>Provider</h3>
                <table class="table table-striped table-bordered">
                    <tbody>
                        <tr><th>ID</th><td>{{ problem.terraform_file_id.provider.id }}</td></tr>
                        <tr><th>Name</th><td>{{ problem.terraform_file_id.provider.name }}</td></tr>
                        <tr><th>ProviderName</th><td>{{ problem.terraform_file_id.provider.provider_name }}</td></tr>
                    </tbody>
                </table>
                <h3>Attributes</h3>
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr>
                        <th>Key</th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for attribute in problem.terraform_file_id.provider.attribute.all %}
                    <tr>
                        <td>
                            {{ attribute.key }}
                        </td>
                        <td>
                            {{ attribute.value }}
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="tab-pane" id="tab_3t">
                <div align="right">
                    <button class="btn btn-info" onClick="location.href='{% url 'problem-edit' pk=problem.id %}'">Edit</button>
                </div>
            </div>
            <div class="tab-pane" id="tab_4t">
                <div align="right">
                    <button class="btn btn-info" onClick="location.href='{% url 'problem-edit' pk=problem.id %}'">Edit</button>
                </div>
                <h3>Variables</h3>
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr>
                        <th>Key</th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for variable in problem.terraform_file_id.variables.all %}
                    <tr>
                        <td>
                            {{ variable.key }}
                        </td>
                        <td>
                            {{ variable.value }}
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}